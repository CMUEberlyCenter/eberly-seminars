<% category_requirements = @participant.future_faculty_enrollment.requirements.group_by(&:requirement_category) %>
<% @participant.future_faculty_enrollment.categories.each do |c| %>
<h1 class="requirement-category-label"><%= c.label %></h1>


<div class="styled-select">
<%= select({}, :requirement_id, category_requirements[c].collect {|r| [r.label, r.id]}, {:include_blank => "+ #{c.label.singularize}"}) %>
</div>


<div class="add-activity-form" style="display: block">
  <%= form_for @participant, remote: true do |f| %>
  
  <%#= f.fields_for "ParticipantActivity::ClassroomObservation".constantize.build do |o| %>
  <%= f.fields_for :activities, @participant.activities.build do |o| %>
  <%= o.hidden_field( :type, value: "ParticipantActivity::ClassroomObservation") %>
  <h2>Project Type</h2><br/><div style="float: left;"><%#= o.select( :project_type_id, ProjectType.all.collect {|a| [a.label, a.id]}) %></div><br/>
  <h2>Description</h2><br/><div style="margin-left: 15px;"> <%= o.text_field( :description ) %></div><br/>
  <% end %>
  <%= f.submit "Create" %>
  <% end %>
</div>

<% end %>



<div>
  <ul>
    <% @participant.projects.each do |a| %>
    <li class="project">
      <h2><strong><%= best_in_place a, :project_type_id, :display_as => :display_type, type: :select, :collection => ProjectType.all.collect {|a| [a.id, a.label]} %></strong></h2> <%= link_to "[x]", project_url(a), :method => :delete, remote: true, confirm: "Really delete this?" %><br/>
      <%= best_in_place a, :description %>
      <%# best_in_place a, :project_status_id, display_as: :display_status, type: :select, :collection => ProjectStatus.all.collect {|a| [a.id, a.label]} %>        </li>
    <% end %>
  </ul>

  <% if @participant.projects.size == 0 %>
  <p class="note">None.</p>
  <% end %>

  <div id="add-project-form">
    <%= form_for @participant, remote: true do |f| %>
    <%= f.fields_for :projects, @participant.projects.build do |o| %>
    <h2>Project Type</h2><br/><div style="float: left;"><%= o.select( :project_type_id, ProjectType.all.collect {|a| [a.label, a.id]}) %></div><br/>
    <h2>Description</h2><br/><div style="margin-left: 15px;"> <%= o.text_field( :description ) %></div><br/>
    <% end %>
    <%= f.submit "Create" %>
    <% end %>
  </div>

  <div class="button_container add">
    <%= link_to "+ Project", '#', :id => "add-project-link", :class => 'boxy' %>
  </div>

</div>
