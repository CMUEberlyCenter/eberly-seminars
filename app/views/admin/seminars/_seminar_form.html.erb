<section class="seminar-listing <%= @seminar.status %> admin">
  <h1><%= @seminar.title %></h1>
  <%= form_for @seminar, :url => { :action => "create" }, :html => { :class => "seminar_form"} do |f| %>

  <% if @seminar.errors.any? %>
  <div id="errorExplanation">
    <h2><%= pluralize(@seminar.errors.count, "error") %> prohibited
      this seminar from being saved:</h2>
    <ul>
      <% @seminar.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
  <% end %>

  <%= f.hidden_field :id %>
  <%= f.label :title, 'Title' %>
  <%= f.text_field :title %>

  <%= f.label :start_at, 'Start At' %>
  <input type="text" class="timepicker" name="timepicker" id="seminar_start_at" name="seminar[start_at]" value="<%= @seminar.start_at.strftime('%l:%M:%S %p') %>"/> 
  <input type="text" id="start-datepicker" value="<%= @seminar.start_at.strftime('%m/%d/%Y') %>">

  <%= f.label :end_at, 'End At' %>
  <input type="text" class="timepicker" name="timepicker" id="seminar_end_at" name="seminar[end_at]" value="<%= @seminar.end_at.strftime('%l:%M:%S %p') %>"/>  
  <input type="text" id="end-datepicker" value="<%= @seminar.end_at.strftime('%m/%d/%Y') %>">

  <%= f.label :maximum_capacity, 'Maximum Capacity' %>
  <%= f.text_field :maximum_capacity, :value => "25" %>

    <%= f.label :location, 'Location' %>
    <%= f.text_field :location %>

    <%= f.label :description, 'Description' %>
    <%= f.text_area :description, :size => "55x12" %>

    <%= f.label :seminar_status_id, 'Seminar Status' %>
    <%= f.collection_select(:seminar_status_id, SeminarStatus.all, :id, :status) %>

    <%= f.submit "Save" %> | <%= link_to "Cancel", admin_seminars_url %>

<% end %>
</section>

<script>
  $(document).ready(function(){
    $('#seminar_start_at').timepicker({
        timeFormat: 'h:mm p',
        // year, month, day and seconds are not important
        minTime: new Date(0, 0, 0, 8, 0, 0),
        maxTime: new Date(0, 0, 0, 22, 0, 0),
        startTime: new Date(0, 0, 0, 12, 00, 0),
        interval: 30,
        change: function(time) {
          var new_time = time;
          new_time.setHours(time.getHours()+2)
          var element = $(this);
          var timepicker = element.timepicker();
          $('#seminar_end_at').attr( 'value', timepicker.format(new_time));
          // timepicker.format(time));
        }
    });

    $('#seminar_end_at').timepicker({
        timeFormat: 'h:mm p',
        // year, month, day and seconds are not important
        minTime: new Date(0, 0, 0, 8, 0, 0),
        maxTime: new Date(0, 0, 0, 22, 0, 0),
        startTime: new Date(0, 0, 0, 12, 00, 0),
        interval: 30
    });
  });



  $(function() {
  $( "#end-datepicker" ).datepicker({
  showOn: "button",
  buttonImage: "/assets/calendar-icon.png",
  buttonImageOnly: true
  });
  });

  $(function() {
  $( "#start-datepicker" ).datepicker({
  showOn: "button",
  buttonImage: "/assets/calendar-icon.png",
  buttonImageOnly: true,
  altField: "#end-datepicker"
  });
  });
</script>
